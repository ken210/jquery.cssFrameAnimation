/**
 * @author Ken
 * ken210.com / @ken_rosaka
 * version 0.3 - 05-09-2011
 * 
 * emulate a timeline based animation using css classes
 * updates, examples and usage: https://github.com/ken210/
 * 
 */

(function($){$.fn.cssFrameAnimation=function(options){var defaults={fps:40,animEvent:'hover',complete:undefined};$.extend(defaults,options);return this.each(function(){var element=this,elemClasses=this.className,interval,currentFrame=1,totalFrames=parseInt($(this).data('frames'),10)||1,ascending=true,cssClass='',setClass=function(){var classToSet=elemClasses+' '+defaults.animEvent+currentFrame;$(element).removeClass();$(element).addClass(classToSet);},enterFrame=function(skip){if(ascending&¤tFrame<totalFrames){setClass();currentFrame++;}else if(!ascending&¤tFrame>1){setClass();currentFrame--;}else{stop(skip);}},play=function(skip){interval=setInterval(enterFrame,1000/defaults.fps,skip);},stop=function(skip){clearInterval(interval);setClass(elemClasses);if($.isFunction(defaults.complete)&&skip)
defaults.complete.call(this);},forward=function(event){stop();ascending=true;play(event.data.skip);},backward=function(){stop();ascending=false;play();},init=(function(){if(defaults.animEvent=='hover'){$(element).bind('mouseover',{skip:true},forward);$(element).bind('mouseout',backward);}else{$(element).bind(defaults.animEvent,forward);}})();});};})(jQuery);